# 시나리오 2: 기존 준비서면 보완하기

## 초기 상태
- 사용자가 이전에 작성한 준비서면이 열려있음
- AI Agent가 Write 모드로 설정됨
- 새로운 판례와 증거자료가 프로젝트에 추가된 상태

## 사용자 행동 시퀀스

### 1. 수정 모드 진입
1. ModifyDocumentButton(✏️) 클릭
2. 수정 목적 입력: "새로 발견된 판례와 증거를 반영하여 논리 보강"

### 2. 새로운 자료 참조 추가
1. MentionSystem 활성화('@' 키 입력)
2. ProjectReferenceSection에서 새로운 자료 선택:
   - EvidenceItem: "신규 발견된 거래내역서" 선택
   - PrecedentItem: "대법원 2023다56789 판결" 선택
3. InlineChip으로 표시된 참조 위치 조정

### 3. 문맥 분석 및 수정 제안
1. Context Display에서 현재 문단의 맥락 확인
2. SuggestNextButton(🤖)을 통해 AI의 수정 제안 요청
3. Process Section에서:
   - 새로운 자료의 분석 현황 모니터링
   - 기존 내용과의 정합성 검토 진행상황 확인

### 4. 수정 이력 관리
1. EditHistoryManager를 통해:
   - 수정 전후 버전 비교
   - 수정 지시사항 기록 확인
2. EditProgressTracker로 수정 진행상황 모니터링:
   - 수정 횟수 확인
   - 소요 시간 체크

### 5. 결과 검토 및 확정
1. Output Section에서:
   - 수정된 내용 검토
   - 새로운 자료가 적절히 인용되었는지 확인
2. Action Buttons를 통해:
   - 변경사항 최종 검토
   - 프로젝트에 저장

## 예상 결과
- 새로운 판례와 증거가 자연스럽게 통합된 보강된 준비서면
- 기존 논리 구조는 유지하면서 보완된 주장
- 체계적인 수정 이력 기록

## 예외 상황 처리
1. 새로운 자료와 기존 주장이 상충하는 경우:
   - Analysis Steps에서 충돌 지점 확인
   - AI의 조정 제안 검토
2. 수정 과정에서 오류 발생 시:
   - EditHistory를 통해 안정적인 버전으로 복원
3. 자동 수정 제안이 부적절한 경우:
   - 수동 수정 모드로 전환
   - Feedback Section을 통해 문제점 보고 