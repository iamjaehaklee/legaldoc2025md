# UI 구성 요소 및 디자인

## 1. 모달 기본 구조
- 크기: 너비 800px, 높이 600px (반응형으로 조정 가능)
  - 최소 크기: 너비 600px, 높이 400px
  - 최대 크기: 화면의 80%
- 배경색: #FFFFFF
- 그림자: box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1)
- 테두리: border-radius: 8px
- z-index: 1000 (최상위 레이어)

## 2. 헤더 영역
- 높이: 60px
- 제목: "분석 항목 선택" (font-size: 20px, font-weight: 600)
  - 맥락에 따라 동적 변경 (예: "인용할 항목 선택", "자동생성을 위한 항목 선택")
- 닫기 버튼: 우측 상단
  - hover 시 배경색 변경 (#F5F5F5)
  - 키보드 단축키: ESC
- 검색창
  - 너비: 100% - 40px (좌우 패딩)
  - placeholder: "목표/주장 검색..."
  - 검색 아이콘 (클릭 가능)
  - 자동완성 기능
    - 최근 검색어 표시
    - 추천 검색어 표시
    - 검색어 하이라이트
  - 키보드 단축키: Ctrl/Cmd + F

## 3. 메인 콘텐츠 영역
- 트리 구조 뷰
  - 좌측 패널 (너비: 300px)
    - 목표(Goal) 및 주장(Claim) 계층 구조
      - 아이콘으로 타입 구분
      - 확장/축소 상태 표시
      - 하위 항목 수 표시
    - 트리 노드 표시 정보
      - 제목 (최대 2줄)
      - 관련성 점수 (있는 경우)
      - 하위 항목 미리보기
    - 선택 상태 표시
      - 단일 선택: 파란색 배경 (#E3F2FD)
      - 다중 선택: 체크박스 활성화
    - 스크롤 시 헤더 고정
  - 우측 패널 (나머지 영역)
    - 선택된 항목 상세 정보
      - 제목 및 설명
      - 생성일/수정일
      - 작성자/담당자
      - 상태 정보
    - 증거자료 및 참고자료 목록
      - 썸네일 또는 아이콘
      - 제목 및 간단 설명
      - 페이지 번호
      - 관련 문단 요약
    - 미리보기 영역
      - 문서: 페이지 단위 보기
      - 이미지: 썸네일 및 원본 크기
      - PDF: 내장 뷰어 사용

## 4. 하단 액션 영역
- 높이: 60px
- 선택 정보 표시
  - 선택된 항목 수
  - 전체 선택 해제 버튼
- 액션 버튼
  - 주 액션 버튼 (맥락별 텍스트)
    - 인용 모드: "인용하기"
    - 자동생성 모드: "생성하기"
    - 항목 추가 모드: "추가하기"
  - 보조 액션 버튼
    - "선택 취소"
    - hover 시 배경색 변경
  - 키보드 단축키: Enter (주 액션)

## 5. 맥락 인식 UI 요소
- 상단 컨텍스트 바
  - 높이: 40px
  - 호출 출처 표시
    - 아이콘 + 텍스트
    - 에디터/뷰어/채팅 구분
  - 선택된 텍스트 미리보기
    - 최대 2줄
    - 말줄임(...) 처리
    - hover 시 전체 텍스트 툴팁
  - 모드 전환 버튼
    - 토글 스위치 형태
    - 현재 모드 하이라이트
    - 키보드 단축키: Alt + M

## 6. 검색 및 필터링
- 컨텍스트 기반 필터
  - 관련성 점수 표시
    - 0-100 점수 체계
    - 시각적 표시 (색상 또는 막대)
  - 정렬 옵션
    - 관련성 순
    - 최신순
    - 제목순
- 고급 필터 패널
  - 문서 타입 필터
    - 체크박스 목록
    - 빠른 선택/해제
  - 날짜 범위 필터
    - 달력 UI
    - 기간 프리셋
  - 관련성 점수 필터
    - 슬라이더 UI
    - 최소값 설정

## 7. 자동생성 관련 UI
- 생성 옵션 패널
  - 인용 스타일 선택
    - 직접 인용 (큰따옴표)
    - 간접 인용 (바꿔쓰기)
    - 혼합 인용 (직접+간접)
  - 증거자료 설정
    - 포함 여부 토글
    - 최대 개수 설정
    - 자동 선택/수동 선택
  - 텍스트 설정
    - 길이 조절 (단어 수/문자 수)
    - 형식 선택 (문단/목록)
- 미리보기 패널
  - 실시간 미리보기
    - 생성 텍스트 표시
    - 포맷팅 적용
    - 수정 가능 여부
  - 증거자료 목록
    - 순서 변경 가능
    - 개별 삭제 가능
    - 가중치 조절

# 용어 정의 및 일관성
- Goal (목표): 최상위 분석 항목
- Claim (주장): 목표의 하위 항목
- Evidence (증거자료): 주장을 뒷받침하는 자료
- Reference (참고자료): 관련된 추가 자료
- Context (맥락): 모달이 호출된 환경
- Mode (모드): 인용/자동생성 작업 방식
- Relevance Score (관련성 점수): 검색어 또는 선택 텍스트와의 연관성

# 수정된 위젯 트리 구조
```
AnalysisItemPickerModal
├── ContextBar
│   ├── SourceIndicator
│   ├── SelectedTextPreview
│   └── ModeSwitcher
├── ModalHeader
│   ├── Title
│   ├── SearchBar
│   │   ├── SearchInput
│   │   └── SearchIcon
│   └── CloseButton
├── ModalContent
│   ├── TreeViewPanel
│   │   ├── AdvancedFilters
│   │   │   ├── DocumentTypeFilter
│   │   │   ├── DateRangeFilter
│   │   │   └── RelevanceScoreFilter
│   │   ├── TreeView
│   │   │   ├── GoalNode
│   │   │   │   └── ClaimNode
│   │   │   └── ClaimNode
│   │   │       └── EvidenceNode
│   │   └── ScrollBar
│   └── DetailPanel
│       ├── ItemHeader
│       │   ├── ItemTitle
│       │   ├── ItemType
│       │   └── RelevanceScore
│       ├── ItemContent
│       │   ├── Description
│       │   └── Preview
│       └── RelatedItems
│           └── ItemList
├── AutoGenerationPanel (자동생성 모드)
│   ├── GenerationOptions
│   │   ├── QuoteStyleSelector
│   │   ├── EvidenceInclusionToggle
│   │   └── LengthSelector
│   └── PreviewSection
│       ├── GeneratedTextPreview
│       └── IncludedEvidenceList
└── ModalFooter
    ├── SelectionCount
    ├── CancelButton
    └── ActionButton (맥락에 따라 "인용하기" 또는 "생성하기")
```

# 인터랙션 상세 (추가)
5. 맥락 인식 인터랙션
   - 호출 맥락에 따른 자동 모드 설정
   - 선택된 텍스트가 있는 경우 자동 관련성 분석
   - 모드 전환 시 부드러운 UI 전환 애니메이션

6. 자동생성 인터랙션
   - 옵션 변경 시 실시간 미리보기 업데이트
   - 드래그 앤 드롭으로 증거자료 순서 조정
   - 생성 텍스트 길이 실시간 조절

# 인터랙션 상세
1. 검색 기능
   - 실시간 검색 결과 표시
   - 검색어 하이라이트
   - 검색 결과 필터링 옵션

2. 트리 네비게이션
   - 키보드 방향키로 이동 가능
   - 스페이스바로 항목 선택/해제
   - 더블클릭으로 노드 확장/축소

3. 다중 선택
   - Ctrl/Cmd + 클릭으로 개별 항목 선택
   - Shift + 클릭으로 범위 선택

4. 미리보기
   - 선택된 항목의 내용 즉시 로드
   - 스크롤 가능한 미리보기 영역
   - 관련 문서 링크 제공 


****
# 이 모달이 호출되는 맥락
[목표 또는 주장을 호출해서 인용]
- 문서 에디터에서 문서를 작성하다가 유저가 작성 중인 문단 또는 블록 선택한 텍스트와 관련된 목표(Goal) 또는 주장(Claim)를 찾아, 그 목표 또는 주장 내용을 해당 문서에 인용하려고 하는 경우 (또는 그냥 이를 찾아 인용하려는 경우) 또는 그 목표 또는 주장 내용에 해당하는 글을 자동생성 하려는 경우(관련된 증거자료 등도 인용하면서)
- 문서 에디터, 파일뷰어, 법령뷰어, 판례뷰어에서 댓글쓰기를 하다가, 이와 관련된 목표(Goal) 또는 주장(Claim)를 찾아, 그 댓글에서 그 목표 또는 주장 내용을 인용하려고 하는 경우 (또는 그냥 이를 찾아 인용하려는 경우) 또는  그 목표 또는 주장 내용에 해당하는 글과 근거를 자동생성 하려는 경우
- 채팅 중에 직전의 대화 맥락에 맞는 자료를 찾아, 자료를 채팅에서 인용하려고 하는 경우 (또는 그냥 자료를 찾아 인용하려는 경우)

[새로운 증거자료, 참고자료, 주장서면, 법령, 판례, 프로젝트최종결정문을, 주장에 대한 근거자료로서 특정 주장 하에 삽입하려는 경우 - 따라서 주장을 pick 해야 하는 경우]

#상단의 검색창, 메인화면의 목표/주장 간의 트리구조 (주장 하위의 증거자료 등도 명칭/페이지/문단 요지 표시), 1개 이상의 항목을 선택 가능. 
